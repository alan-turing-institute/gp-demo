import{ad as C,M as S,L as k,h as m,$ as M,q as b,K as q}from"./BJ4irGt7.js";import{l as t}from"./CvaqDwXv.js";import{i as g}from"./6XXKwe28.js";function B(e,l,a=l){var c=C();t(e,"input",r=>{var f=r?e.defaultValue:e.value;if(f=i(e)?h(f):f,a(f),c&&f!==(f=l())){var v=e.selectionStart,d=e.selectionEnd;e.value=f??"",d!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(d,e.value.length))}}),(m&&e.defaultValue!==e.value||S(l)==null&&e.value)&&a(i(e)?h(e.value):e.value),k(()=>{var r=l();i(e)&&r===h(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}const _=new Set;function D(e,l,a,c,r=c){var f=a.getAttribute("type")==="checkbox",v=e;let d=!1;if(l!==null)for(var s of l)v=v[s]??(v[s]=[]);v.push(a),t(a,"change",()=>{var u=a.__value;f&&(u=y(v,u,a.checked)),r(u)},()=>r(f?[]:null)),k(()=>{var u=c();if(m&&a.defaultChecked!==a.checked){d=!0;return}f?(u=u||[],a.checked=u.includes(a.__value)):a.checked=g(a.__value,u)}),M(()=>{var u=v.indexOf(a);u!==-1&&v.splice(u,1)}),_.has(v)||(_.add(v),b(()=>{v.sort((u,o)=>u.compareDocumentPosition(o)===4?-1:1),_.delete(v)})),b(()=>{if(d){var u;if(f)u=y(v,u,a.checked);else{var o=v.find(A=>A.checked);u=o==null?void 0:o.__value}r(u)}})}function F(e,l,a=l){t(e,"change",c=>{var r=c?e.defaultChecked:e.checked;a(r)}),(m&&e.defaultChecked!==e.checked||S(l)==null)&&a(e.checked),k(()=>{var c=l();e.checked=!!c})}function y(e,l,a){for(var c=new Set,r=0;r<e.length;r+=1)e[r].checked&&c.add(e[r].__value);return a||c.delete(l),Array.from(c)}function i(e){var l=e.type;return l==="number"||l==="range"}function h(e){return e===""?null:+e}function w(e,l,a){if(e.multiple)return x(e,l);for(var c of e.options){var r=n(c);if(g(r,l)){c.selected=!0;return}}(!a||l!==void 0)&&(e.selectedIndex=-1)}function O(e,l){q(()=>{var a=new MutationObserver(()=>{var c=e.__value;w(e,c)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function I(e,l,a=l){var c=!0;t(e,"change",r=>{var f=r?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(f),n);else{var d=e.querySelector(f)??e.querySelector("option:not([disabled])");v=d&&n(d)}a(v)}),q(()=>{var r=l();if(w(e,r,c),c&&r===void 0){var f=e.querySelector(":checked");f!==null&&(r=n(f),a(r))}e.__value=r,c=!1}),O(e)}function x(e,l){for(var a of e.options)a.selected=~l.indexOf(n(a))}function n(e){return"__value"in e?e.__value:e.value}export{B as a,I as b,D as c,F as d};
