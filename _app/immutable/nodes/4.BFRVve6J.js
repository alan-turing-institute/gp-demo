import{t as ge,a as fe}from"../chunks/cGtBC6Qd.js";import"../chunks/7LKkzqbz.js";import{a4 as lt,aa as we,ab as ot,a9 as Ee,a5 as at,s as m,a6 as f,i as Ce,e as s,ac as k,a1 as h,a7 as g,a8 as nt}from"../chunks/BJ4irGt7.js";import{e as Z,s as L}from"../chunks/CvaqDwXv.js";import{i as Re}from"../chunks/lIaEYNz1.js";import{s as F}from"../chunks/B9r3SdpA.js";import{l as he,s as rt,c as ct}from"../chunks/dhIx7U5O.js";import{b as We}from"../chunks/CUY-1DrG.js";import{i as dt}from"../chunks/CkfO92w8.js";import{o as vt}from"../chunks/Cpzjerpz.js";import{r as J,s as ft,v as Ve,z as Ie,l as ht,m as gt}from"../chunks/PBAI84v4.js";var pt=ge(`<div class="game-ended-popup svelte-1q64cz5"><div class="popup-content svelte-1q64cz5"><h2 class="svelte-1q64cz5">Game Ended</h2> <p class="svelte-1q64cz5">You've used all your lives!</p> <p class="svelte-1q64cz5"> </p> <button class="svelte-1q64cz5">Play Again</button></div></div>`),mt=ge('<button class="svelte-1q64cz5">Clear Samples</button>'),yt=ge('<main class="svelte-1q64cz5"><h1 class="svelte-1q64cz5">Asteroid Explorer</h1> <div class="live-bar-container svelte-1q64cz5"><div class="lives-label svelte-1q64cz5"> </div> <div class="live-bar svelte-1q64cz5"><div class="lives-remaining svelte-1q64cz5"></div> <span class="heart svelte-1q64cz5">❤️</span></div></div> <div class="score-bar-container svelte-1q64cz5"><div class="score-label svelte-1q64cz5">Score: <span id="score-percentage"> </span></div> <div class="score-bar svelte-1q64cz5"><div class="score-value svelte-1q64cz5" id="score-bar"></div> <span class="star svelte-1q64cz5" id="score-star">⭐</span></div></div> <!> <div class="container svelte-1q64cz5"><div class="panel svelte-1q64cz5"><h2 class="svelte-1q64cz5">Asteroid Visualization</h2> <canvas class="svelte-1q64cz5"></canvas></div> <div class="panel svelte-1q64cz5"><h2 class="svelte-1q64cz5">Flyby distance past Earth</h2> <div class="contour-container svelte-1q64cz5"><canvas></canvas></div> <div class="info svelte-1q64cz5"><p class="svelte-1q64cz5"> </p> <p class="svelte-1q64cz5"> </p> <div class="instruction svelte-1q64cz5"><p class="highlight svelte-1q64cz5">Your goal is to train an accurate emulator using as few simulator runs as possible.</p> <p class="svelte-1q64cz5">Click directly on the plot above to sample points. This will run the simulation and update the emulator model based on the simulator output.</p></div> <div class="button-group svelte-1q64cz5"><!> <button class="info-button svelte-1q64cz5"> </button></div> <div class="energy-function svelte-1q64cz5"><h3 class="svelte-1q64cz5">About the Visualization:</h3> <p class="svelte-1q64cz5">The flyby distance is the closest approach distance given an object’s hyperbolic speed and impact parameter. A value of 0 indicates a collision with Earth.</p></div></div></div></div></main>');function Mt(Fe,$e){lt($e,!1);const w=k(),d={primary:"#3c6382",accent:"#60a3bc",highlight:"#6a89cc",text:"#2c3e50",surface:"#dcdde1",error:"#e55039"};let E=k(5e3),C=k(3),q=k([]),$=[],G=k(),R=k(),X=k(!1),K=k(!1),W=k(20),Q=k(!1);const P=6371;function Ge(e,n,a=398600.4418,t=6371){const i=Math.sqrt(1+Math.pow(n,2)*Math.pow(e,4)/Math.pow(a,2)),l=a*(i-1)/Math.pow(e,2);return l>=t?l:0}function H(e,n){return Ge(n,e)}const S=400,u=400,o=40,U=S-2*o,O=he().domain([5e3,5*P]).range([o,S-o]),j=he().domain([3,20]).range([u-o,o]);let A=1/0,V=-1/0;function Ye(){const n=J(5e3,5*P,(5*P-5e3)/50).toArray(),a=J(3,20,17/50).toArray();for(const t of n)for(const i of a){const l=H(t,i);A=Math.min(A,l),V=Math.max(V,l)}A=Math.floor(A*10)/10,V=Math.ceil(V*10)/10,console.log(`Energy range: ${A} to ${V}`)}function Le(){h(q,[]),$=[],B(),h(W,20),h(w,0)}function Xe(e){if(s(X)||s(W)<=0)return;const n=s(R).getBoundingClientRect(),a=e.clientX-n.left,t=e.clientY-n.top;if(a>=o&&a<=S-o&&t>=o&&t<=u-o){const i=O.invert(a),l=j.invert(t);h(E,i),h(C,l);const r=H(s(E),s(C));h(q,[...s(q),{angle:s(E),velocity:s(C),energy:r}]),h(W,s(W)-1),s(W)===0&&h(Q,!0),je(),ee()}}function He(){h(W,20),h(w,0),h(q,[]),$=[],h(Q,!1),B()}function Oe(e,n){if(e.length!==n.length||e.length===0)throw new Error("Arrays must be of the same length and non-empty");const a=e.reduce((r,y)=>r+y,0)/e.length,t=e.reduce((r,y)=>r+Math.pow(y-a,2),0),l=1-e.reduce((r,y,_)=>r+Math.pow(y-n[_],2),0)/t;return Math.max(0,l)}function je(){h(X,!0);let e=[],n=[];if(s(q).length===0){h(X,!1);return}setTimeout(()=>{const a=s(q).map(c=>[c.angle,c.velocity]),t=s(q).map(c=>c.energy),i=(c,p)=>{const z=(c[0]-p[0])/1e4,T=(c[1]-p[1])/5;return Math.exp(-.5*(z*z+T*T))},l=a.length,r=Ie(l,l);for(let c=0;c<l;c++)for(let p=0;p<l;p++)r.set([c,p],i(a[c],a[p]));const y=.01;for(let c=0;c<l;c++)r.set([c,c],r.get([c,c])+y);const _=40,b=J(5e3,5*P,(5*P-5e3)/_).toArray(),x=J(3,20,17/_).toArray();$=[];for(const c of b)for(const p of x){const z=[c,p],T=Ie(1,l);for(let v=0;v<l;v++)T.set([0,v],i(z,a[v]));try{const v=ht(r,t),Y=gt(T,v).get([0,0]);$.push({angle:c,velocity:p,predicted:Y}),n.push(Y),e.push(H(c,p))}catch(v){console.error("Error in GP calculation:",v)}}B(),h(w,Oe(e,n)),h(X,!1)},50)}function B(){if(!s(R))return;const e=s(R).getContext("2d");e.clearRect(0,0,s(R).width,s(R).height);const n=ft(Ve).domain([V,A]).interpolator(Ve);if(s(K)){const t=U/80;for(let i=0;i<80;i++)for(let l=0;l<80;l++){const r=5e3+(5*P-5e3)*i/80,y=3+17*l/80,_=H(r,y),b=O(r),x=j(y);e.fillStyle=n(_),e.fillRect(b-t/2,x-t/2,t,t)}}else if($.length===0){const t=U/80;for(let i=0;i<80;i++)for(let l=0;l<80;l++){const r=5e3+(5*P-5e3)*i/80,y=3+17*l/80,_=O(r),b=j(y);e.fillStyle=n(0),e.fillRect(_-t/2,b-t/2,t,t)}}else{const a=U/Math.sqrt($.length);$.forEach(t=>{const i=O(t.angle),l=j(t.velocity);e.fillStyle=n(t.predicted),e.fillRect(i-a/2,l-a/2,a,a)})}Be(e,n),e.strokeStyle=d.primary,e.lineWidth=2,e.beginPath(),e.moveTo(o,u-o),e.lineTo(S-o,u-o),e.moveTo(o,o),e.lineTo(o,u-o),e.stroke(),e.fillStyle=d.text,e.font="12px Arial, sans-serif",e.textAlign="center",e.fillText("5000",o,u-o+15),e.fillText(String(5*P),S-o,u-o+15),e.fillText("Impact parameter (km)",S/2,u-o+20),e.textAlign="right",e.fillText("3",o-10,u-o),e.fillText("20",o-10,o),e.save(),e.translate(o-15,u/2-25),e.rotate(-Math.PI/2),e.fillText("Velocity (km/s)",0,0),e.restore(),s(q).forEach(a=>{const t=O(a.angle),i=j(a.velocity),l=10,r=e.createRadialGradient(t,i,2,t,i,l);r.addColorStop(0,d.highlight),r.addColorStop(1,"rgba(106, 137, 204, 0)"),e.fillStyle=r,e.beginPath(),e.arc(t,i,l,0,2*Math.PI),e.fill(),e.fillStyle=d.accent,e.beginPath(),e.arc(t,i,6,0,2*Math.PI),e.fill(),e.strokeStyle=d.primary,e.lineWidth=1,e.stroke()})}function Be(e,n){const t=u-2*o,i=S-o+20,l=o,r=100,y=t/r;for(let p=0;p<r;p++){const z=A+(V-A)*(r-p-1)/r;e.fillStyle=n(z),e.fillRect(i,l+p*y,20,y+1)}e.strokeStyle=d.text,e.lineWidth=1,e.strokeRect(i,l,20,t),e.fillStyle=d.text,e.font="14px Arial, sans-serif",e.textAlign="left";const _=5,b=l+t;e.beginPath(),e.moveTo(i,b),e.lineTo(i+20,b),e.stroke(),e.fillText(A.toFixed(1),i+20+_,b+5);const x=l;e.beginPath(),e.moveTo(i,x),e.lineTo(i+20,x),e.stroke(),e.fillText(V.toFixed(1),i+20+_,x+5);const c=l+t/2;e.beginPath(),e.moveTo(i,c),e.stroke(),e.save(),e.translate(i-25,l+t/2),e.rotate(Math.PI/2),e.textAlign="center",e.fillText("Flyby Distance (km)",0,-60),e.restore()}function ee(){if(!s(G))return;const e=s(G).getContext("2d");e.clearRect(0,0,S,u);const t=he().domain([5e3,5*P]).range([u-o-30,o])(s(E)),i=o*2;e.save(),e.setLineDash([5,5]),e.beginPath(),e.moveTo(0,t),e.lineTo(S,t),e.strokeStyle=d.error,e.lineWidth=1,e.stroke(),e.restore();const l=20,r=12,y=2*Math.PI/r;e.beginPath();for(let N=0;N<r;N++){const ke=N*y,it=.8+Math.random()*.4,Pe=l*it,Ae=i+Pe*Math.cos(ke),Me=t+Pe*Math.sin(ke);N===0?e.moveTo(Ae,Me):e.lineTo(Ae,Me)}e.closePath(),e.fillStyle=d.surface,e.fill(),e.strokeStyle=d.primary,e.lineWidth=2,e.stroke(),e.fillStyle=d.text,e.font="12px Arial",e.textAlign="center",e.fillText("Asteroid",i,t+l+15);const b=s(C)*10;e.beginPath(),e.moveTo(i,t),e.lineTo(i+b,t),e.strokeStyle=d.error,e.lineWidth=3,e.stroke();const x=8;e.beginPath(),e.moveTo(i+b,t),e.lineTo(i+b-x,t-x/2),e.lineTo(i+b-x,t+x/2),e.closePath(),e.fillStyle=d.error,e.fill();const c=i+b/2,p=t;e.fillStyle=d.text,e.font="12px Arial",e.textAlign="center",e.fillText("velocity",c+25,p-10);const z=20,T=S-o-z,v=u-o-z,Y=e.createRadialGradient(T,v,z*.3,T,v,z);Y.addColorStop(0,"#66ccff"),Y.addColorStop(1,"#003366"),e.beginPath(),e.arc(T,v,z,0,2*Math.PI),e.fillStyle=Y,e.fill(),e.strokeStyle="#002244",e.lineWidth=2,e.stroke(),e.beginPath(),e.moveTo(0,v),e.lineTo(S,v),e.strokeStyle=d.primary,e.lineWidth=2,e.stroke();const M=(i+T)/2;e.beginPath(),e.moveTo(M,t),e.lineTo(M,v),e.strokeStyle=d.text,e.lineWidth=1,e.stroke();const I=5;e.beginPath(),e.moveTo(M,t),e.lineTo(M-I,t+I),e.lineTo(M+I,t+I),e.closePath(),e.fillStyle=d.text,e.fill(),e.beginPath(),e.moveTo(M,v),e.lineTo(M-I,v-I),e.lineTo(M+I,v-I),e.closePath(),e.fillStyle=d.text,e.fill(),e.save(),e.fillStyle=d.text,e.font="12px Arial",e.textAlign="left",e.fillText("impact parameter",M+5,(t+v)/2),e.restore(),e.fillStyle=d.text,e.font="12px Arial",e.textAlign="center",e.fillText("Earth",T,v+z+15),e.fillStyle=d.text,e.font="14px Arial",e.textAlign="left",e.fillText(`Impact Parameter: ${s(E).toFixed(0)} km`,20,30),e.fillText(`Velocity: ${s(C).toFixed(2)} km/s`,20,50)}function De(){h(K,!s(K)),B()}vt(()=>{console.log("Astroid canvas:",s(G)),console.log("Contour canvas:",s(R)),Ye(),ee(),B()}),we(()=>{},()=>{h(w,0)}),we(()=>(s(G),s(E),s(C)),()=>{s(G)&&(s(E)!==void 0||s(C)!==void 0)&&ee()}),ot(),dt();var te=yt(),se=m(f(te),2),ie=f(se),Ke=f(ie);g(ie);var pe=m(ie,2),me=f(pe),Ne=m(me,2);g(pe),g(se);var le=m(se,2),oe=f(le),ye=m(f(oe)),Ze=f(ye);g(ye),g(oe);var ue=m(oe,2),be=f(ue),Je=m(be,2);g(ue),g(le);var Se=m(le,2);{var Qe=e=>{var n=pt(),a=f(n),t=m(f(a),4),i=f(t);g(t);var l=m(t,2);g(a),g(n),Ee(r=>L(i,`Final score: ${r??""}%`),[()=>(s(w)*100).toFixed(0)],Ce),Z("click",l,He),fe(e,n)};Re(Se,e=>{s(Q)&&e(Qe)})}var ze=m(Se,2),ae=f(ze),ne=m(f(ae),2);F(ne,"width",S),F(ne,"height",u),We(ne,e=>h(G,e),()=>s(G)),g(ae);var _e=m(ae,2),re=m(f(_e),2),D=f(re);F(D,"width",S+60),F(D,"height",u),We(D,e=>h(R,e),()=>s(R)),g(re);var xe=m(re,2),ce=f(xe),Ue=f(ce);g(ce);var de=m(ce,2),et=f(de);g(de);var Te=m(de,4),qe=f(Te);{var tt=e=>{var n=mt();Z("click",n,Le),fe(e,n)};Re(qe,e=>{s(q).length>0&&e(tt)})}var ve=m(qe,2),st=f(ve,!0);g(ve),g(Te),nt(2),g(xe),g(_e),g(ze),g(te),Ee((e,n,a)=>{L(Ke,`Lives ${s(W)??""}/20`),F(me,"style",`width: ${e??""}%`),F(Ne,"style",`left: ${e??""}%`),L(Ze,`${n??""}%`),F(be,"style",`width: ${s(w)*100}%`),F(Je,"style",`left: ${s(w)*100}%`),rt(D,1,ct(s(X)?"loading":""),"svelte-1q64cz5"),L(Ue,`Samples: ${s(q).length??""}`),L(et,`Current flyby distance: ${a??""}`),L(st,s(K)?"Show Emulator Prediction":"Show Simulator Function")},[()=>Math.max(0,s(W)/20*100),()=>(s(w)*100).toFixed(0),()=>H(s(E),s(C)).toFixed(2)],Ce),Z("click",D,Xe),Z("click",ve,De),fe(Fe,te),at()}export{Mt as component};
